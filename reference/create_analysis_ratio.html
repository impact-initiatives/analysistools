<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The function will calculate the ratio between 2 variables, the numerator and
denominator.
The numerator : By default, it will change all NAs to 0. If numerator_NA_to_0 is set to FALSE,
rows with missing values will be filtered out.
The denominator : All rows with missing value will be filtered out (cannot be changed). In
addition, by default, all rows with a value equal to 0 will be filtered out, if
filter_denominator_0 is set to TRUE, they will be kept."><title>Calculate a ratio from a survey — create_analysis_ratio • analysistools</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate a ratio from a survey — create_analysis_ratio"><meta property="og:description" content="The function will calculate the ratio between 2 variables, the numerator and
denominator.
The numerator : By default, it will change all NAs to 0. If numerator_NA_to_0 is set to FALSE,
rows with missing values will be filtered out.
The denominator : All rows with missing value will be filtered out (cannot be changed). In
addition, by default, all rows with a value equal to 0 will be filtered out, if
filter_denominator_0 is set to TRUE, they will be kept."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">analysistools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.901</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Calculate a ratio from a survey</h1>
      
      <div class="d-none name"><code>create_analysis_ratio.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The function will calculate the ratio between 2 variables, the numerator and
denominator.
The numerator : By default, it will change all NAs to 0. If numerator_NA_to_0 is set to FALSE,
rows with missing values will be filtered out.</p>
<p>The denominator : All rows with missing value will be filtered out (cannot be changed). In
addition, by default, all rows with a value equal to 0 will be filtered out, if
filter_denominator_0 is set to TRUE, they will be kept.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">create_analysis_ratio</span><span class="op">(</span></span>
<span>  <span class="va">design</span>,</span>
<span>  group_var <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  <span class="va">analysis_var_numerator</span>,</span>
<span>  <span class="va">analysis_var_denominator</span>,</span>
<span>  numerator_NA_to_0 <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  filter_denominator_0 <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  level <span class="op">=</span> <span class="fl">0.95</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>design</dt>
<dd><p>design survey</p></dd>


<dt>group_var</dt>
<dd><p>dependent variable(s), variable to group by. If no dependent
variable, it should be NA or empty string. If more than one variable, it
should be one string with each variable separated by comma, e.g. "groupa, groupb"
to group for groupa and groupb.
NA is default for no grouping.</p></dd>


<dt>analysis_var_numerator</dt>
<dd><p>character string with the numerator column name.</p></dd>


<dt>analysis_var_denominator</dt>
<dd><p>character string with the denominator column name.</p></dd>


<dt>numerator_NA_to_0</dt>
<dd><p>Will turn all NA of the numerator into 0's, default TRUE.</p></dd>


<dt>filter_denominator_0</dt>
<dd><p>Will remove all rows with 0's in the denominator, default TRUE.</p></dd>


<dt>level</dt>
<dd><p>the confidence level. 0.95 is default</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>a data frame with the ratio for each group</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">school_ex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  hh <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hh1"</span>, <span class="st">"hh2"</span>, <span class="st">"hh3"</span>, <span class="st">"hh4"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  num_children <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">0</span>, <span class="fl">2</span>, <span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  num_enrolled <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="cn">NA</span>, <span class="fl">0</span>, <span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  num_attending <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"b"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">me_design</span> <span class="op">&lt;-</span> <span class="fu">srvyr</span><span class="fu">::</span><span class="fu"><a href="http://gdfe.co/srvyr/reference/as_survey.html" class="external-link">as_survey</a></span><span class="op">(</span><span class="va">school_ex</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Default value will give a ratio of 0.2 as there are 1 child out of 5 attending school.</span></span></span>
<span class="r-in"><span><span class="co"># numerator: 1 child from hh1 and 0 from hh3. denominator: 3 from hh1 and 2 from hh3. In the</span></span></span>
<span class="r-in"><span><span class="co"># hh3, the num_attending is NA because there is a skip logic, there cannot be a child attending as</span></span></span>
<span class="r-in"><span><span class="co"># none are enrolled. By default, the function has the argument numerator_NA_to_0 set to TRUE to</span></span></span>
<span class="r-in"><span><span class="co"># turn that NA into a 0.</span></span></span>
<span class="r-in"><span><span class="co"># n and n_total are 2 as 2 households were included in the calculation. hh2 was not included in</span></span></span>
<span class="r-in"><span><span class="co"># the calculation of totals. The argument filter_denominator_0 set to TRUE removes that row.</span></span></span>
<span class="r-in"><span><span class="fu">create_analysis_ratio</span><span class="op">(</span><span class="va">me_design</span>,</span></span>
<span class="r-in"><span>                      analysis_var_numerator <span class="op">=</span> <span class="st">"num_attending"</span>,</span></span>
<span class="r-in"><span>                      analysis_var_denominator <span class="op">=</span> <span class="st">"num_children"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 13</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   analysis_type analysis_var  analysis_var_value group_var group_var_value  stat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> ratio         num_attendin… NA %/% NA          <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>                0.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 7 more variables: stat_low &lt;dbl&gt;, stat_upp &lt;dbl&gt;, n &lt;int&gt;, n_total &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   n_w &lt;dbl&gt;, n_w_total &lt;dbl&gt;, analysis_key &lt;chr&gt;</span></span>
<span class="r-in"><span><span class="co"># If numerator_NA_to_0 is set to FALSE, ratio will be 1/3, as hh3 with 2 children and NA for</span></span></span>
<span class="r-in"><span><span class="co"># attending will be removed with the na.rm = T inside the survey_ratio calculation.</span></span></span>
<span class="r-in"><span><span class="co"># n and n_total is 1 as only 1 household was used.</span></span></span>
<span class="r-in"><span><span class="fu">create_analysis_ratio</span><span class="op">(</span><span class="va">me_design</span>,</span></span>
<span class="r-in"><span>                      analysis_var_numerator <span class="op">=</span> <span class="st">"num_attending"</span>,</span></span>
<span class="r-in"><span>                      analysis_var_denominator <span class="op">=</span> <span class="st">"num_children"</span>,</span></span>
<span class="r-in"><span>                      numerator_NA_to_0 <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>There were 2 warnings in `dplyr::summarise()`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> The first warning was:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> In argument: `srvyr::survey_ratio(...)`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> Caused by warning in `qt()`:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> NaNs produced</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Run `dplyr::last_dplyr_warnings()` to see the 1 remaining warning.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 13</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   analysis_type analysis_var  analysis_var_value group_var group_var_value  stat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> ratio         num_attendin… NA %/% NA          <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>              0.333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 7 more variables: stat_low &lt;dbl&gt;, stat_upp &lt;dbl&gt;, n &lt;int&gt;, n_total &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   n_w &lt;dbl&gt;, n_w_total &lt;dbl&gt;, analysis_key &lt;chr&gt;</span></span>
<span class="r-in"><span><span class="co"># If filter_denominator_0 is set to FALSE, ratio will be 0.2 as there are 1 child out of 5</span></span></span>
<span class="r-in"><span><span class="co"># attending school.</span></span></span>
<span class="r-in"><span><span class="co"># The number of household counted, n and n_total, is equal to 3 instead 2. The household with 0</span></span></span>
<span class="r-in"><span><span class="co"># child is counted in the totals.</span></span></span>
<span class="r-in"><span><span class="co"># (01 + 0 + 0) / (3 + 0 + 2)</span></span></span>
<span class="r-in"><span><span class="fu">create_analysis_ratio</span><span class="op">(</span><span class="va">me_design</span>,</span></span>
<span class="r-in"><span>                      analysis_var_numerator <span class="op">=</span> <span class="st">"num_attending"</span>,</span></span>
<span class="r-in"><span>                      analysis_var_denominator <span class="op">=</span> <span class="st">"num_children"</span>,</span></span>
<span class="r-in"><span>                      filter_denominator_0 <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 13</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   analysis_type analysis_var  analysis_var_value group_var group_var_value  stat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> ratio         num_attendin… NA %/% NA          <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>                0.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 7 more variables: stat_low &lt;dbl&gt;, stat_upp &lt;dbl&gt;, n &lt;int&gt;, n_total &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   n_w &lt;dbl&gt;, n_w_total &lt;dbl&gt;, analysis_key &lt;chr&gt;</span></span>
<span class="r-in"><span><span class="co"># For weights and group:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">8988</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">somedata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span><span class="op">)</span>, <span class="fl">50</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  children_518 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  children_enrolled <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>children_enrolled <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">children_enrolled</span> <span class="op">&gt;</span> <span class="va">children_518</span>,</span></span>
<span class="r-in"><span>                                           <span class="va">children_518</span>,</span></span>
<span class="r-in"><span>                                           <span class="va">children_enrolled</span></span></span>
<span class="r-in"><span>  <span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">somedata</span><span class="op">[[</span><span class="st">"weights"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">somedata</span><span class="op">$</span><span class="va">groups</span> <span class="op">==</span> <span class="st">"a"</span>, <span class="fl">1.33</span>, <span class="fl">.67</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">create_analysis_ratio</span><span class="op">(</span><span class="fu">srvyr</span><span class="fu">::</span><span class="fu"><a href="http://gdfe.co/srvyr/reference/as_survey.html" class="external-link">as_survey</a></span><span class="op">(</span><span class="va">somedata</span>, weights <span class="op">=</span> <span class="va">weights</span>, strata <span class="op">=</span> <span class="va">groups</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      group_var <span class="op">=</span> <span class="cn">NA</span>,</span></span>
<span class="r-in"><span>                      analysis_var_numerator <span class="op">=</span> <span class="st">"children_enrolled"</span>,</span></span>
<span class="r-in"><span>                      analysis_var_denominator <span class="op">=</span> <span class="st">"children_518"</span>,</span></span>
<span class="r-in"><span>                      level <span class="op">=</span> <span class="fl">0.95</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 13</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   analysis_type analysis_var  analysis_var_value group_var group_var_value  stat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> ratio         children_enr… NA %/% NA          <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>              0.639</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 7 more variables: stat_low &lt;dbl&gt;, stat_upp &lt;dbl&gt;, n &lt;int&gt;, n_total &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   n_w &lt;dbl&gt;, n_w_total &lt;dbl&gt;, analysis_key &lt;chr&gt;</span></span>
<span class="r-in"><span><span class="fu">create_analysis_ratio</span><span class="op">(</span><span class="fu">srvyr</span><span class="fu">::</span><span class="fu"><a href="http://gdfe.co/srvyr/reference/as_survey.html" class="external-link">as_survey</a></span><span class="op">(</span><span class="va">somedata</span>, weights <span class="op">=</span> <span class="va">weights</span>, strata <span class="op">=</span> <span class="va">groups</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      group_var <span class="op">=</span> <span class="st">"groups"</span>,</span></span>
<span class="r-in"><span>                      analysis_var_numerator <span class="op">=</span> <span class="st">"children_enrolled"</span>,</span></span>
<span class="r-in"><span>                      analysis_var_denominator <span class="op">=</span> <span class="st">"children_518"</span>,</span></span>
<span class="r-in"><span>                      level <span class="op">=</span> <span class="fl">0.95</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 13</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   analysis_type analysis_var  analysis_var_value group_var group_var_value  stat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> ratio         children_enr… NA %/% NA          groups    a               0.670</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> ratio         children_enr… NA %/% NA          groups    b               0.578</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 7 more variables: stat_low &lt;dbl&gt;, stat_upp &lt;dbl&gt;, n &lt;int&gt;, n_total &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   n_w &lt;dbl&gt;, n_w_total &lt;dbl&gt;, analysis_key &lt;chr&gt;</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Yann Say, Mehedi Khan.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

